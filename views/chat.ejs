<!doctype html>
<html>
<head>
	<title>Socket.IO chat</title>
	<link rel='stylesheet' href='/stylesheets/style.css'/>
	<script src="/javascripts/socket.io.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script>
		var socket = io.connect('http://localhost:1234/chat');

		$(document).ready(function() {
			$('form').submit(function(){
				var input = $('#m'),
					message = input.val();

				socket.emit('chat message', {
					message: message,
					username: 'Tarabass'
				});
				input.val('');

				return false;
			});

			socket.on('chat message', function(data){
				$('#messages').append($('<li>').text(data.username + ': ' + data.message));
			});

			socket.on('connect', function () {
				socket.emit('chat message', {
					message: 'User joined the room!',
					username: 'Tarabass'
				});
			});
		});
	</script>
</head>
<body>
	<h1><%= title %></h1>
	<ul id="messages"></ul>
	<form action="">
		<input id="m" autocomplete="off" /><button>Send</button>
	</form>
</body>
</html>